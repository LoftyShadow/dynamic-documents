# 多环境配置指南

系统支持通过 `DOCS_ENV` 环境变量加载不同的配置文件，适用于开发、测试、生产等不同场景。

## 配置文件命名规范

系统会按照以下优先级尝试加载配置文件：

1. `docs-config.{env}.yaml` (最高优先级)
2. `docs-config.{env}.json`
3. `docs-config.yaml` (默认)
4. `docs-config.json` (兼容)

## 常用环境

### 1. 默认环境 (无 DOCS_ENV)
- **配置文件**: `docs-config.yaml`
- **用途**: 本地开发，默认配置
- **命令**: `pnpm run generate`

### 2. 生产环境 (DOCS_ENV=prod)
- **配置文件**: `docs-config.prod.yaml`
- **用途**: 构建部署，通常指向服务器路径，禁用本地调试文档
- **命令**: `pnpm run generate:prod`

### 3. 开发环境 (DOCS_ENV=dev)
- **配置文件**: `docs-config.dev.yaml`
- **用途**: 特殊的开发配置（如果需要与默认不同）
- **命令**: `pnpm run generate:dev`

## 使用示例

### 场景：本地开发 vs 生产构建

**本地开发 (`docs-config.yaml`):**
```yaml
projects:
  - name: 工作文档
    sourceDir: C:\Work\md  # 本地路径
    enabled: true

localFixedDocs:
  - text: 调试指南
    items: [...]
```

**生产环境 (`docs-config.prod.yaml`):**
```yaml
projects:
  - name: 工作文档
    sourceDir: /var/www/docs/work  # 服务器路径
    enabled: true

# 生产环境不包含调试文档
localFixedDocs: []

settings:
  debounceDelay: 0  # 不需要防抖
```

## 常用命令

| 命令 | 说明 | 对应的环境 |
|------|------|------------|
| `pnpm run dev` | 启动本地开发 | 默认 |
| `pnpm run build` | 构建生产版本 | `prod` |
| `pnpm run generate:prod` | 手动生成生产配置 | `prod` |
| `pnpm run generate:dev` | 手动生成开发配置 | `dev` |

## 自定义环境

你可以创建任意环境的配置文件，例如测试环境 `test`：

1. 创建 `docs-config.test.yaml`
2. 运行命令：
   ```bash
   cross-env DOCS_ENV=test node scripts/generate-sidebar.js
   ```

## 注意事项

1. **文件存在性**: 如果指定了环境但对应的配置文件不存在，系统会自动回退到默认配置 (`docs-config.yaml`)。
2. **构建流程**: `pnpm run build` 命令已配置为自动使用 `prod` 环境生成侧边栏。
